<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href=/assets/css/style.css>
    <link rel="shortcut icon" type="image/png" href=/assets/img/favicon.png>
    <title>Zhiqiang Zang | Zip的编码问题</title>
    <link type="application/atom+xml" rel="alternate" href="/feed.xml" title="Zhiqiang Zang" />
    <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Zip的编码问题 | Zhiqiang Zang</title>
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="Zip的编码问题" />
<meta name="author" content="zzq" />
<meta property="og:locale" content="zh_cn" />
<meta name="description" content="昨天整理MO资源包的时候，突然发现zip包里的文件名编码好像有点问题。我先是用7-zip在Win10中文区域配置下打包出了一个zip，然后当我把Win10的“非Unicode程序的语言”调成英文时，zip解压出的文件中原来的中文文件名会以乱码显示。我想，八成又是编码问题，不知道是哪里又没有用UTF-8。" />
<meta property="og:description" content="昨天整理MO资源包的时候，突然发现zip包里的文件名编码好像有点问题。我先是用7-zip在Win10中文区域配置下打包出了一个zip，然后当我把Win10的“非Unicode程序的语言”调成英文时，zip解压出的文件中原来的中文文件名会以乱码显示。我想，八成又是编码问题，不知道是哪里又没有用UTF-8。" />
<meta property="og:site_name" content="Zhiqiang Zang" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-08-05T00:00:00+00:00" />
<script type="application/ld+json">
{"description":"昨天整理MO资源包的时候，突然发现zip包里的文件名编码好像有点问题。我先是用7-zip在Win10中文区域配置下打包出了一个zip，然后当我把Win10的“非Unicode程序的语言”调成英文时，zip解压出的文件中原来的中文文件名会以乱码显示。我想，八成又是编码问题，不知道是哪里又没有用UTF-8。","@type":"BlogPosting","headline":"Zip的编码问题","dateModified":"2019-08-05T00:00:00+00:00","datePublished":"2019-08-05T00:00:00+00:00","url":"/2019/08/05/zip%E7%9A%84%E7%BC%96%E7%A0%81%E9%97%AE%E9%A2%98.html","mainEntityOfPage":{"@type":"WebPage","@id":"/2019/08/05/zip%E7%9A%84%E7%BC%96%E7%A0%81%E9%97%AE%E9%A2%98.html"},"author":{"@type":"Person","name":"zzq"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  </head>
  <body>
    <div id="banner">
  <!-- <img src="/assets/img/header.jpg" alt="header image" width="100%"> -->
  <h1>Have a nice day 😉</h1>
</div>

    <div id="menu">
  <nav>
    <ul>
      
        <li>
          <a href="/" >
            Home
          </a>
        </li>
      
        <li>
          <a href="/blog.html" >
            Blog
          </a>
        </li>
      
        <li>
          <a href="/#publications" >
            Publications
          </a>
        </li>
      
        <li>
          <a href="/dl/zhiqiang-zang-resume.pdf" >
            Resume
          </a>
        </li>
      
    </ul>
  </nav>
</div>

    <div id="content">
      

<h1>Zip的编码问题</h1>
<p>
  
    
        <!-- ZH-CN's date format -->
        2019年8月5日

      
  
  
  
    -
    <a href="/authors/zzq.html">
    
        臧志强
      
    </a>
  
</p>
<hr />
<p>昨天整理MO资源包的时候，突然发现zip包里的文件名编码好像有点问题。我先是用7-zip在Win10中文区域配置下打包出了一个zip，然后当我把Win10的“非Unicode程序的语言”调成英文时，zip解压出的文件中原来的中文文件名会以乱码显示。我想，八成又是编码问题，不知道是哪里又没有用UTF-8。</p>

<p>在谷歌了一通之后，大概明白了原因，梳理如下：</p>
<ol>
  <li>使用7-zip软件制作zip压缩包时，7-zip不会默认采用UTF-8编码，而是默认采用操作系统当前的编码。只有当文件名中含有当前系统编码不支持的字符时，7-zip才会对该文件名使用UTF-8编码。</li>
  <li>Win10下“非Unicode程序的语言”会影响此处的文件名的当前系统编码。</li>
  <li>鉴于上述原因，当我在2处使用中文时，1处会使用GBK编码（猜的，反正是某种中文编码）。因此，当我将2处设置改成英文后，在解压时就无法识别GBK编码了。</li>
</ol>

<p>综上，该问题的解决方案有如下几种：</p>
<ol>
  <li>把Win10下“非Unicode程序的语言”设置成中文。</li>
  <li>在使用7-zip压缩时添加“cu”参数。</li>
</ol>

<hr />

  <p><strong>版权声明</strong>：</p>
  <p><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="知识共享许可协议" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" /></a><br />本作品采用<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a>进行许可。</p>
  


    </div>
    <div id="clear"></div>
    <div id="footer">
  <div id="inner">
    2020@Zhiqiang Zang<br/>
    Favicon made by <a href="http://www.freepik.com/" target="_blank">Freepik</a> from <a href="http://www.flaticon.com/" target="_blank">www.flaticon.com</a> licensed by <a href="http://creativecommons.org/licenses/by/3.0/" target="_blank">CC 3.0 BY</a>
  </div>
</div>

  </body>
</html>
